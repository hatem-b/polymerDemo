<html><head><link rel="import" href="../polymer-imports.html">

</head><body><dom-module id="car-service">
  <template>
    <iron-ajax id="getCars" url="{{apiUrl}}" handle-as="json" last-response="{{cars}}" on-response="onGet"></iron-ajax>
    <iron-ajax id="createCar" url="{{apiUrl}}" content-type="application/json" method="POST" handle-as="json" on-response="onCreate" on-error="onError"></iron-ajax>
    <iron-ajax id="deleteCar" method="DELETE" handle-as="json" on-response="onDelete"></iron-ajax>
    <iron-ajax id="updateCar" content-type="application/json" method="PUT" handle-as="json" on-response="onUpdate" on-error="onError"></iron-ajax>
    <iron-ajax id="getCarById" handle-as="json" last-response="{{car}}" on-response="onGet"></iron-ajax>
  </template>

  <script>!function(){"use strict";Polymer({is:"car-service",properties:{apiUrl:{type:String,value:"https://node-hatem.azurewebsites.net/cars"},cars:{type:Array,value:[],notify:!0},car:{type:Object,value:{},notify:!0}},getCars:function(){this.$.getCars.generateRequest()},createCar:function(e){this.$.createCar.body={data:e},this.$.createCar.generateRequest()},onCreate:function(e){this.fire("create-success",e.detail.response)},deleteCar:function(e){this.$.deleteCar.url=this.apiUrl+"/"+e,this.$.deleteCar.generateRequest()},onDelete:function(e){this.fire("delete-success",e.detail.response)},getCarById:function(e){this.$.getCarById.url=this.apiUrl+"/"+e,this.$.getCarById.generateRequest()},updateCar:function(e){this.$.updateCar.url=this.apiUrl,this.$.updateCar.body={data:e},this.$.updateCar.generateRequest()},onUpdate:function(e){this.fire("update-success",e.detail.response)},onError:function(e){},onGet:function(e){this.fire("get",e.detail.response)}})}();</script>
</dom-module>
</body></html>